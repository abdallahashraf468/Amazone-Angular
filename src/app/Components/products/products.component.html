<h1>Products</h1>
<p>{{ date | date : "longDate" }}</p>

<mat-form-field>
  <mat-label>Filter</mat-label>
  <input
    matInput
    (keyup)="applyFilter($event)"
    placeholder="serach products"
    #input
  />
</mat-form-field>

<div class="container-fluid">
  <table mat-table [dataSource]="dataSource" class="mat-elevation-z8 container">
    <!-- Dynamically create columns based on the properties of IfireBseProduct -->
    <ng-container *ngFor="let column of displayedColumns" [matColumnDef]="column">
      <th class="text-center" mat-header-cell *matHeaderCellDef>{{ column }}</th>
      <td
        mat-cell
        *matCellDef="let element"
        style="font-size: 1em;max-width:min-content;max-height: min-content;"
      >
        <!-- Handle specific properties and description width -->
        <ng-container *ngIf="column !== 'description'">
          {{ element[column] }}
        </ng-container>
  
        <ng-container *ngIf="column === 'description'">
          <p
            style="
              max-lines: 2;
              max-width: 300px;
              overflow: hidden;
              text-overflow: ellipsis;
            "
          >
            {{ element[column] }}
          </p>
        </ng-container>
        <ng-container *ngIf="column === 'inStock'">
          <div [ngSwitch]="quantityAvalable">
            <div *ngSwitchCase="0">Out of Stock`</div>
            <div *ngSwitchCase="1">only one left</div>
            <div *ngSwitchCase="2">only two left</div>
            <div *ngSwitchCase="3">only three left</div>
            <div *ngSwitchDefault>in Stock </div>
          </div>
        </ng-container>
        <ng-container *ngIf="column === 'imageCover'">
          <div
            style="max-width: 200px; overflow: hidden; text-overflow: ellipsis"
          >
            <img
              [src]="element[column]"
              alt="Product Image"
              class="rounded img-fluid"
              style="max-width: 100px; max-height: 100px"
            />
          </div>
        </ng-container>
        <ng-container *ngIf="column === 'update'">
          <button class="btn btn-primary btn-sm" (click)="openEditproductForm()">
            <mat-icon style="padding: 0%; margin: 0%; font-size: 1.5em;"
              aria-hidden="false"
              aria-label="Example edit icon"
              fontIcon="edit"
            ></mat-icon>Update
          </button>
        </ng-container>
        <ng-container *ngIf="column === 'delete'">
          <button class="btn btn-danger btn-sm" btn-sm>
            <mat-icon style="padding: 0%; margin: 0%; font-size: 1.5em;"
              aria-hidden="false"
              aria-label="Example delete icon"
              fontIcon="delete"
            ></mat-icon>Delete
          </button>
        </ng-container>
      </td>
    </ng-container>
  
    <!-- Row shown when there is no matching data. -->
    <tr class="mat-row" *matNoDataRow>
      <td class="mat-cell" [attr.colspan]="displayedColumns.length + 1">
        <mat-progress-bar mode="indeterminate"></mat-progress-bar>
        {{ dataSource.filter }}
      </td>
    </tr>
  
    <!-- Header row -->
    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
  
    <!-- Data rows -->
    <tr mat-row *matRowDef="let row; columns: displayedColumns;" [class.demo-row-is-clicked]="isRowClicked(row)"
      (click)="onRowClick(row)"></tr>
  </table>
  <mat-paginator [pageSizeOptions]="[5, 10, 20]" showFirstLastButtons aria-label="Select page of periodic elements">
  </mat-paginator>
</div>

<div>
  <h2>Add a New Product</h2>
  <form
    (submit)="addProduct()"
    #addProductForm="ngForm"
    enctype="multipart/form-data"
    class="card shadow-2-strong card-registration"
    style="border-radius: 15px"
  >
    <div class="card-body p-4 p-md-5">
      <h3 class="mb-4 pb-2 pb-md-0 mb-md-5">Add Product</h3>
      <div class="col-md-12 mb-4">  
        <div class="form-outline">
          <label class="form-label ms-3" for="productId">Product Id</label>
          <input
            [(ngModel)]="prdToAdd.id"
            name="productId"
            readonly
            id="productId"
            class="form-control form-control-lg"
          />
        </div>
      </div>
      <div class="col-md-12 mb-4">
        <!-- title    -->
        <div class="form-outline">
          <label class="form-label ms-3" for="title">Title:</label>
          <input
            type="text"
            id="title"
            name="title"
            [(ngModel)]="prdToAdd.title"
            required
            [ngClass]="{
              'is-invalid':
                (ProductNameInput.dirty || ProductNameInput.touched) &&
                !ProductNameInput.valid
            }"
            required
            [(ngModel)]="prdToAdd.title"
            #ProductNameInput="ngModel"
            minlength="3"
            name="productName"
            pattern="^[A-Za-z0-9_\\-\\.\s]{1,255}$"
            type="text"
            id="productName"
            class="form-control form-control-lg"
          />
          <span class="invalid-feedback">
            <span *ngIf="ProductNameInput.errors?.['required']"
              >Product name is required</span
            >
            <span *ngIf="ProductNameInput.errors?.['minlength']"
              >Product name must be at least 3 chars</span
            >
          </span>
        </div>
      </div>
      <div class="col-md-12 mb-4">
        <!-- description    -->
        <div class="form-outline">
          <label class="form-label ms-3" for="description"
            >Description:</label
          >
          <textarea
            [ngClass]="{
              'is-invalid':
                (ProductDescriptionInput.dirty ||
                  ProductDescriptionInput.touched) &&
                !ProductDescriptionInput.valid
            }"
            id="description"
            name="description"
            [(ngModel)]="prdToAdd.description"
            required
            #ProductDescriptionInput="ngModel"
            class="form-control form-control-lg"
          ></textarea>
          <span class="invalid-feedback">
            <span *ngIf="ProductDescriptionInput.errors?.['required']"
              >Product description is required
            </span>
          </span>
        </div>
      </div>

      <div class="col-md-12 mb-4">
        <div class="form-outline">
          <label for="brandName" class="form-label ms-3 "></label>
          <select class="form-select form-select-lg " aria-label="brandName selection">
            <option value="" selected disabled> Brands</option>
            <option *ngFor="let brand of brands" [value]="brand.name">{{brand.name}}</option>
          </select>
          </div>
      </div>
      <div class="col-md-12 mb-4">
        <div class="form-outline">
          <label for="brandSlug" class="form-label ms-3 "></label>
          <select class="form-select form-select-lg " aria-label="brandSlug selection">
            <option value="" selected disabled> Brand Slug</option>
            <option *ngFor="let brand of brands" [value]="brand.slug">{{brand.slug}}</option>
          </select>
          </div>
      </div>
      <div class="col-md-12 mb-4">
        <!-- brand image    -->
        <div class="form-outline">
          <label class="form-label ms-3" for="brandImage"
            >Brand Image:</label
          >
          <input
            [ngClass]="{
              'is-invalid':
                (ProductBrandImageInput.dirty ||
                  ProductBrandImageInput.touched) &&
                !ProductBrandImageInput.valid
            }"
            type="file"
            #ProductBrandImageInput="ngModel"
            id="brandImage"
            name="brandImage"
            [(ngModel)]="prdToAdd.brand.image"
            required
            class="form-control form-control-lg"
          />
          <span class="invalid-feedback">
            <span *ngIf="ProductBrandImageInput.errors?.['required']">
              product brand image is required
            </span>
          </span>
        </div>
      </div>
      <div class="col-md-12 mb-4">
        <!-- price -->
        <div class="form-outline">
          <label class="form-label ms-3" for="price">Price:</label>
          <input
            type="text"
            id="price"
            name="price"
            #productPriceInput="ngModel"
            pattern="^\d+(\.\d{2})?$"
            minlength="1"
            [(ngModel)]="prdToAdd.price"
            required
            [ngClass]="{
              'is-invalid': productPriceInput.dirty && !productPriceInput.valid
            }"
            class="form-control form-control-lg"
          />
          <span class="invalid-feedback">
            <span *ngIf="productPriceInput.errors?.['required']"
              >Price is required</span
            >
            <span *ngIf="productPriceInput.errors?.['pattern']"
              >Price must be a numeric value</span
            >
            <span *ngIf="productPriceInput.errors?.['minlength']"
              >Price must be at least 1 character</span
            >
          </span>
        </div>
      </div>

      <div class="col-md-12 mb-4">
        <!-- price after discount -->
        <div class="form-outline">
          <label class="form-label ms-3" for="priceAfterDiscount"
            >Price after discount:</label
          >
          <input
            type="text"
            id="priceAfterDiscount"
            name="priceAfterDiscount"
            [(ngModel)]="prdToAdd.priceAfterDiscount"
            #productPriceAfterDiscountInput="ngModel"
            required
            minlength="1"
            pattern="^\d+(\.\d{2})?$"
            [ngClass]="{
              'is-invalid':
                productPriceAfterDiscountInput.dirty &&
                !productPriceAfterDiscountInput.valid
            }"
            class="form-control form-control-lg"
          />
          <span class="invalid-feedback">
            <span *ngIf="productPriceAfterDiscountInput.errors?.['required']"
              >Price after discount is required</span
            >
            <span *ngIf="productPriceAfterDiscountInput.errors?.['pattern']"
              >Price after discount must be a numeric value</span
            >
            <span *ngIf="productPriceAfterDiscountInput.errors?.['minlength']"
              >Price after discount must be at least 1 character</span
            >
          </span>
        </div>
      </div>
      <div class="col-md-12 mb-4">
        <!-- quantity -->
        <div class="form-outline">
          <label class="form-label ms-3" for="quantity">Quantity:</label>
          <input
            type="text"
            id="quantity"
            name="quantity"
            [(ngModel)]="prdToAdd.quantity"
            #productQuantityInput="ngModel"
            minlength="1"
            pattern="^\d+$"
            required
            [ngClass]="{
              'is-invalid':
                productQuantityInput.dirty && !productQuantityInput.valid
            }"
            class="form-control form-control-lg"
          />
          <span class="invalid-feedback">
            <span *ngIf="productQuantityInput.errors?.['required']"
              >Quantity is required</span
            >
            <span *ngIf="productQuantityInput.errors?.['pattern']"
              >Quantity must be a numeric value</span
            >
            <span *ngIf="productQuantityInput.errors?.['minlength']"
              >Quantity must be at least 1 character</span
            >
          </span>
        </div>
      </div>
      <div class="col-md-12 mb-4">
        <!--image cover-->
        <div class="form-outline">
          <label class="form-label ms-3" for="imageCover"
            >Image Cover:</label
          >
          <input
            [ngClass]="{
              'is-invalid':
                (productImageCoverInput.dirty ||
                  productImageCoverInput.touched) &&
                !productImageCoverInput.valid
            }"
            type="file"
            id="imageCover"
            name="imageCover"
            required
            #productImageCoverInput="ngModel"
            [(ngModel)]="prdToAdd.imageCover"
            class="form-control form-control-lg"
          />
          <span class="invalid-feedback">
            <span *ngIf="productImageCoverInput.errors?.['required']">
              Image Cover is required
            </span>
          </span>
        </div>
      </div>
      <div class="col-md-12 mb-4">
        <!--images-->
        <div class="form-outline">
          <label class="form-label ms-3" for="images">Images:</label>
          <input
            [ngClass]="{
              'is-invalid':
                (productImagesInput.dirty || productImagesInput.touched) &&
                !productImagesInput.valid
            }"
            type="file"
            id="images"
            name="images"
            multiple
            #productImagesInput="ngModel"
            [(ngModel)]="prdToAdd.images"
            required
            class="form-control form-control-lg"
          />
          <span class="invalid-feedback">
            <span *ngIf="productImagesInput.errors?.['required']">
              Images is required
            </span>
          </span>
        </div>
      </div>
      <div class="col-md-12 mb-4">
        <div class="form-outline">
          <label for="categories" class="form-label ms-3 "></label>
          <select class="form-select form-select-lg " aria-label="categories selection">
            <option selected disabled>Categories</option>
            <option value="music">Music</option>
            <option value="mobiles">Mobiles</option>
            <option value="beauty&health">Beauty & Health</option>
            <option value="women's-Fashion"> Womens's Fashion</option>
            <option value="home">Home</option>
            <option value="baby&toy"> Baby & Toy</option>
            <option value="men's-Fashion">Men's Fashion</option>
            <option value="electronics">Electronics</option>
            <option value="superMarket">Super Market</option>
            <option value="books">Books</option>
          </select>
          </div>
      </div>
      <div class="col-md-12 mb-4">
        <div class="form-outline">
          <label for="catSlug" class="form-label ms-3 "></label>
          <select class="form-select form-select-lg " aria-label="categories selection">
            <option selected disabled>Category slug</option>
            <option value="music">music</option>
            <option value="mobiles">mobiles</option>
            <option value="beauty&health">beauty & health</option>
            <option value="women's-Fashion"> womens's fashion</option>
            <option value="home">home</option>
            <option value="baby&toy"> baby & toy</option>
            <option value="men's-Fashion">men's fashion</option>
            <option value="electronics">electronics</option>
            <option value="superMarket">super market</option>
            <option value="books">books</option>
          </select>
          </div>
      </div>
      <div class="col-md-12 mb-4">
        <!-- ratings average -->
        <div class="form-outline">
          <label class="form-label ms-3" for="ratingsAverage"
            >Ratings Average:</label
          >
          <input
            type="text"
            id="ratingsAverage"
            name="ratingsAverage"
            #productRatingsAverageInput="ngModel"
            [(ngModel)]="prdToAdd.ratingsAverage"
            required
            minlength="1"
            pattern="^\d+(\.\d{2})?$"
            [ngClass]="{
              'is-invalid':
                productRatingsAverageInput.dirty &&
                !productRatingsAverageInput.valid
            }"
            class="form-control form-control-lg"
          />
          <span class="invalid-feedback">
            <span *ngIf="productRatingsAverageInput.errors?.['required']"
              >Ratings Average is required</span
            >
            <span *ngIf="productRatingsAverageInput.errors?.['pattern']"
              >Ratings Average must be a numeric value</span
            >
            <span *ngIf="productRatingsAverageInput.errors?.['minlength']"
              >Ratings Average must be at least 1 character</span
            >
          </span>
        </div>
      </div>
      <div class="col-md-12 mb-4">
        <!-- ratings quantity -->
        <div class="form-outline">
          <label class="form-label ms-3" for="ratingsQuantity"
            >Ratings Quantity:</label
          >
          <input
            type="text"
            id="ratingsQuantity"
            name="ratingsQuantity"
            [(ngModel)]="prdToAdd.ratingsQuantity"
            #productRatingsQuantityInput="ngModel"
            required
            minlength="1"
            pattern="^\d+$"
            [ngClass]="{
              'is-invalid':
                productRatingsQuantityInput.dirty &&
                !productRatingsQuantityInput.valid
            }"
            class="form-control form-control-lg"
          />
          <span class="invalid-feedback">
            <span *ngIf="productRatingsQuantityInput.errors?.['required']"
              >Ratings Quantity is required</span
            >
            <span *ngIf="productRatingsQuantityInput.errors?.['pattern']"
              >Ratings Quantity must be a numeric value</span
            >
            <span *ngIf="productRatingsQuantityInput.errors?.['minlength']"
              >Ratings Quantity must be at least 1 character</span
            >
          </span>
        </div>
      </div>
      <div class="col-md-12 mb-4">
        <!-- updateTime    -->
        <div class="form-outline">
          <label class="form-label ms-3" for="updatedAt"
            >Update Time:</label
          >
          <input
            [ngClass]="{
              'is-invalid':
                (productUpdatedAtInput.dirty ||
                  productUpdatedAtInput.touched) &&
                !productUpdatedAtInput.valid
            }"
            type="datetime-local"
            id="updatedAt"
            name="updatedAt"
            #productUpdatedAtInput="ngModel"
            [(ngModel)]="prdToAdd.updatedAt"
            required
            class="form-control form-control-lg"
          />
          <span class="invalid-feedback">
            <span *ngIf="productUpdatedAtInput.errors?.['required']">
              Updated Time is required
            </span>
          </span>
        </div>
      </div>
      <div class="col-md-12 mb-4">
        <!-- createTime    -->
        <div class="form-outline">
          <label class="form-label ms-3" for="updatedAt"
            >Create Time:</label
          >
          <input
            [ngClass]="{
              'is-invalid':
                (productCreatedAtInput.dirty ||
                  productCreatedAtInput.touched) &&
                !productCreatedAtInput.valid
            }"
            type="datetime-local"
            id="createdAt"
            name="createdAt"
            #productCreatedAtInput="ngModel"
            [(ngModel)]="prdToAdd.createdAt"
            required
            class="form-control form-control-lg"
          />
          <span class="invalid-feedback">
            <span *ngIf="productCreatedAtInput.errors?.['required']">
              Create Time is required
            </span>
          </span>
        </div>
      </div>
      <div class="col-md-12 mb-4">
        <!-- sold -->
        <div class="form-outline">
          <label class="form-label ms-3" for="sold">Sold Quantity:</label>
          <input
            type="text"
            id="sold"
            name="sold"
            [(ngModel)]="prdToAdd.sold"
            required
            minlength="1"
            #productSoldInput="ngModel"
            pattern="^\d+$"
            [ngClass]="{
              'is-invalid': productSoldInput.dirty && !productSoldInput.valid
            }"
            class="form-control form-control-lg"
          />
          <span class="invalid-feedback">
            <span *ngIf="productSoldInput.errors?.['required']"
              >Sold Quantity is required</span
            >
            <span *ngIf="productSoldInput.errors?.['pattern']"
              >Sold Quantity must be a numeric value</span
            >
            <span *ngIf="productSoldInput.errors?.['minlength']"
              >Sold Quantity must be at least 1 character</span
            >
          </span>
        </div>
      </div>

      <div class="mt-4 pt-2 d-flex justify-content-center">
        <button
          [disabled]="addProductForm.invalid"
          class="btn btn-primary btn-lg"
          [attr.value]="isUpdate ? 'Update' : 'Add Product'"
        >
          {{ isUpdate ? "Update" : "Add Product" }}
        </button>
      </div>
    </div>
  </form>
</div>
